--------------------------------------------------
CPSForum README
--------------------------------------------------

$Id$

Author: Emmanuel Pietriga (ep@nuxeo.com)

Summary:
- Introduction
- History & Bug fixes
- Installation
- Features
- Roles and permissions
- Discussions (comments about documents)

--------------------------------------------------
Introduction
--------------------------------------------------

CPSForum provides newsgroups and discussion threads, anywhere on the site.
It also makes it possible to comment on documents.
See the 'Features' section below for more information.

--------------------------------------------------
History & Bug fixes
--------------------------------------------------

For history and bug fixes, please refer to the HISTORY file.

Still, important features and changes w.r.t implementations (CPSForum v. 0.X.X)
are given here:
- posts are now searchable,
- posts follow their own workflow (forum_post_wf) and have a publication
  status (see doc/forum_wf.svg for a graphical representation of this workflow),
- comments are still stored in Forum objects, but there is no longer
  a comment_mode: standard forums are used in this context (some scripts
  differ slightly, but it is of no consequence to the user). This means
  that all standard forum features (moderation, notification, locking, etc.)
  are available in forums used for commenting documents,
- new permissions make it possible to fine tune who is allowed to do what
  on forums (see below for more information).

--------------------------------------------------
Installation
--------------------------------------------------

For installation information, please refer to the INSTALL file.

IMPORTANT NOTE:
This version of CPSForum and all subsequent versions based on CPSDocument
posts are incompatible with existing Forum instances that have been created
with earlier versions of CPSForum (i.e. which do not use CPSDocument posts).
This means all versions up to (and including) release 0.7.0-1 of April 2004.

--------------------------------------------------
Features
--------------------------------------------------

Forum objects can be created in sections or workspaces.

- Forum settings
  - Moderation
    It is possible to assign moderators to any forum.
    There are two kinds of moderation:
    - 'a priori': messages posted have to be validated by the moderator
      to be visible by other users.
    - 'a posteriori': messages posted are visible to the users as soon as they
      published. But the moderator can make them unvisible or delete them
      afterwards.
  - Anonymous posts: it is possible to allow anonymous users to post messages
    in the forum.
  - Lock: it is possible to lock the forum, making it read only.
  - Number of discussion threads per page: a maximum number of threads per page
    can be set. The value 0 means that there is no limit.

- Forum posts handling
  Users allowed to post messages can create new discussion threads or answer to
  messages in other discussion threads.
  If the forum is moderated 'a priori', the message will appear in the thread
  with a red spot in front of it, meaning that other users cannot see it.
  Users moderating the forum can publish this kind of messages, making them
  visible to all the other users in this forum.
  Moderators can also unpublish, or even delete messages.

--------------------------------------------------
Roles and permissions
--------------------------------------------------

Some details about roles and permissions associated with forums:

- there are three permissions associated with forums:
  * 'Forum Moderate' required to publish/unpublish/delete posts,
  * 'Forum Post' required to post new messages,
  * 'Forum manage comments' required to activate/deactivate comments about a
    given document.

- those three permissions are mapped to CPSDefault roles as follows:
  for standard forums:
    * Forum Moderate = WorkspaceManager, Section Manager, Section Reviewer,
                       Owner
    * Forum Post = WorkspaceManager, WorkspaceMember, WorkspaceReader,
                   SectionManager, SectionReviewer, SectionReader,
                   Owner
    * Forum manage comments = WorkspaceManager, Section Manager,
                              Section Reviewer, Owner

In addition, it is possible to assign roles ForumModerator and ForumPoster
(which speak for themselves) locally in a forum. It is also possible to
change default settings by using CPSInstaller.setupPortalPermissions()

A given user has to have access to a forum object to be able to use his/her
roles specific to the forum.

--------------------------------------------------
Discussions (comments about documents)
--------------------------------------------------

If your document is discussable, an action in the action box makes it
possible to activate comments for your document. If they are activated,
a new action makes it possible to actually comment the document.
These comments are managed by a CPSForum (a forum is associated with each
document that contains comments). Beware: the forum is associated with the
proxy document, not the actual document in the repository, meaning that
the forum is not shared by the various versions of the document (published
in sections, or workgroup drafts). The forum objects themselves are stored
in a specific .cps_discussions in the parent folder (workspace or content)
and are hidden from the user.
