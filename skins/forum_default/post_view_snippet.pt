<tal:block tal:define="post_id options/post_id | nothing;
                       post python:getattr(here, post_id);
                       post_doc python:post.getContent();
                       forum nocall:options/forum;
                       is_reviewer options/is_reviewer;
                       can_post options/can_post | nothing;
                       published python:here.portal_workflow.getInfoFor(post,
                                   'review_state', 'nostate') == 'published';
                       b_start options/b_start | nothing">
<tal:block condition="python:is_reviewer or published">
  <tr>
    <td colspan="2">
      <div class="forumPostTitle">
        <tal:block condition="python:published or (is_reviewer and not published)">
          <a tal:attributes="href
                               python:here.absolute_url()+'/?post_id='+post_id"
             tal:content="post/Title">Title
          </a>
        </tal:block>
        <tal:block tal:define="mcat python:here.Localizer.default" 
                               tal:replace="python:'('+mcat('forum_label_postedby').encode('ISO-8859-15', 'ignore')+' '+here.getPosterName(post.Creator())+')'"/>
      </div>
      <div class="forumPostText"
           tal:content="post_doc/Description">Message</div>
      <form method="post" tal:attributes="action here/absolute_url"
            name="post_form"
            tal:define="locked python:here.locked_thread(post=post,forum=forum)"
            tal:condition="python:not locked and can_post">
        <input type="hidden" name="parent_id:string"
               tal:attributes="value post_id" />
        <input type="hidden" name="b_start" value=""
               tal:attributes="value b_start" />
        <input type="submit" name="forum_post_reply:method"
               class="standalone" value="forum_reply"
               i18n:attributes="value" />
      </form>
    </td>
  </tr>
</tal:block>
</tal:block>
